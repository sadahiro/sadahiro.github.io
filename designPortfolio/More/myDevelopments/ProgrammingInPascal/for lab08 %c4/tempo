program AutoReader (input, output, datafile);
	uses
		Xtension, IOpirots;{list units here}
	var
		FnameIN, FnameOUT: str255;
		FileIN, FileOUT: text;


	procedure Header (var FileOUT: text; FnameIN, FnameOUT: str255);
		var
			Uname: str255;
	begin
		writeln('type in User'' s name ');
		readln(Uname);
		writeln(FileOUT, 'My name is : ', Uname);
		writeln(FileOUT, 'File read from is : ', FnameIN);
		writeln(FileOUT, 'File written is : ', FnameOUT);
		writeln(FileOUT)
	end;				{end of header}

	procedure Conclusion (var FileIN, FileOUT: text; LineCounter, ELineCounter: integer; LstWord: str255; LstNum: integer);
	begin
		writeln(FileOut);
		writeln(FileOut);
		writeln(FileOut);
		writeln(FileOut, 'Total Line :', LineCounter);
		writeln(FileOut, 'Total non-Empty Line :', LineCounter - ELineCounter);
		writeln(FileOut, 'Longest Word :', LstWord, '  ', LstNum, ' charactors');
	end;				{end of conclusion}

	procedure PrintFile (var FnameOUT: str255);
		var
			PF: text;
			Line: str255;
	begin
		reset(PF, FnameOUT);
		while not eof(PF) do
			begin
				readln(PF, Line);
				writeln(Line)
			end;
		close(PF)
	end;

	procedure Execution (var FileIN, FileOUT: text; FnameIN, FnameOUT: str255);

		var
			Line, UnLine: str255;
			LineLength: integer;
			MojiLoop: integer;
			Uname: str255;
			Moji: char;
			Word: str255;
			NWord: integer;
			LstWord: str255;
			LstNum: integer;
			LineCounter, ELineCounter: integer;
	begin
{receive both files}
		LineCounter := 1;				{initializing LineCounter}
		ELineCounter := 0;				{initializing EmptyLineCounter}
		LstNum := 0;				{initializing the largest number}
		NWord := 0;				{initializing NWord to be sent to Xtension: Longest}
		while not eof(FileIN) do
			begin
				readln(FileIN, Line);				{read lines from FileIN}
				Word := '';				{initializing as ' ' }
				UnLine := '';				{initializing as ' ' }
				LineLength := length(Line);				{see how long the Line is: for for loop}
				for MojiLoop := 1 to LineLength do
					begin
						Moji := Line[MojiLoop];
						CharPitalize(Moji);				{Xtension: capitalize charactors}
						LongWord(LstWord, LstNum, Moji, NWord, Word);				{Xtension: find what the longest word is}
						UnLine := concat(UnLine, Moji);				{put Moji into UnLine together again}
					end;
				Line := UnLine;								{and put the thing into Line again}
				write(FileOUT, LineCounter : 0);
				writeln(FileOUT, Line);				{write lines to FileOUT}
				LineCounter := LineCounter + 1;
				if LineLength = 0 then
					ELineCounter := ELineCounter + 1
			end;
		LineCounter := LineCounter - 1;
		Conclusion(FileIN, FileOUT, LineCounter, ELineCounter, LstWord, LstNum);
	end;				{end of Execution}


{******** main program ********}
begin
	OpenFileIN(FileIN, FnameIN);				{open up file to be read}
	OpenFileOUT(FileOUT, FnameOUT);				{open up file to be written}
	Header(FileOUT, FnameIN, FnameOUT);				{printing header}
	Execution(FileIN, FileOUT, FnameIN, FnameOUT);			{process part}
	CloseFile(FileIN);						{closes file read}
	CloseFile(FileOUT);						{closes file written}
	PrintFile(FnameOUT)				{prints saved file}
end.